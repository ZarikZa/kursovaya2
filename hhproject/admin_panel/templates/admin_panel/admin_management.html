{% extends 'admin_panel/base.html' %}
{% load static %}

{% block title_name %}Администраторы сайта - Панель управления{% endblock %}

{% block style %}
    {{ block.super }}
    <link rel="stylesheet" href="{% static 'css/style_prof.css' %}">
{% endblock %}

{% block admin_content %}
<div class="admin-content-header">
    <div class="header-actions">
        <a href="{% url 'admin_dashboard' %}" class="btn-admin btn-admin-primary">
            Назад в дашборд
        </a>
        <a href="{% url 'create_site_admin' %}" class="btn-admin btn-admin-success">
            + Создать администратора
        </a>
    </div>
    <h1>Администраторы сайта</h1>
    <p>Управление администраторами системы</p>
</div>

<div class="admin-card">
    <div class="admin-card-header">
        <h3>Список администраторов ({{ site_admins.count }})</h3>
    </div>
    <div class="admin-card-body">
        {% if site_admins %}
        <div class="table-responsive">
            <table class="admin-table">
                <thead>
                    <tr>
                        <th>ФИО</th>
                        <th>Email</th>
                        <th>Телефон</th>
                        <th>Статус</th>
                        <th>Дата создания</th>
                        <th>Действия</th>
                    </tr>
                </thead>
                <tbody>
                    {% for admin in site_admins %}
                    <tr>
                        <td>
                            <strong>{{ admin.get_full_name }}</strong>
                        </td>
                        <td>{{ admin.email }}</td>
                        <td>{{ admin.phone }}</td>
                        <td>
                            {% if admin.is_active %}
                                <span class="status-approved">Активен</span>
                            {% else %}
                                <span class="status-rejected">Неактивен</span>
                            {% endif %}
                        </td>
                        <td>{{ admin.date_joined|date:"d.m.Y H:i" }}</td>
                        <td>
                            <div class="action-buttons">
                                <a href="{% url 'edit_site_admin' admin.id %}" class="btn-admin btn-admin-primary btn-admin-sm">
                                    Редактировать
                                </a>
                                {% if admin != user %}
                                    {% if admin.is_active %}
                                        <a href="{% url 'toggle_site_admin_status' admin.id %}" class="btn-admin btn-admin-warning btn-admin-sm"
                                           onclick="return confirm('Вы уверены что хотите деактивировать администратора?')">
                                            Деактивировать
                                        </a>
                                    {% else %}
                                        <a href="{% url 'toggle_site_admin_status' admin.id %}" class="btn-admin btn-admin-success btn-admin-sm">
                                            Активировать
                                        </a>
                                    {% endif %}
                                    <a href="{% url 'delete_site_admin' admin.id %}" class="btn-admin btn-admin-danger btn-admin-sm"
                                       onclick="return confirm('Вы уверены что хотите удалить администратора? Это действие нельзя отменить.')">
                                        Удалить
                                    </a>
                                {% else %}
                                    <span class="text-muted">Текущий пользователь</span>
                                {% endif %}
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <div class="empty-state">
            <h3>Нет администраторов сайта</h3>
            <p>Создайте первого администратора для управления системой</p>
            <a href="{% url 'create_site_admin' %}" class="btn-admin btn-admin-success">
                Создать администратора
            </a>
        </div>
        {% endif %}
    </div>
</div>

<style>
.empty-state {
    text-align: center;
    padding: 40px 20px;
    color: #cbd5e1;
}

.empty-state h3 {
    margin-bottom: 10px;
    color: #f8fafc;
}

.empty-state p {
    margin-bottom: 20px;
}

.action-buttons {
    display: flex;
    gap: 5px;
    flex-wrap: wrap;
    align-items: center;
}

.text-muted {
    color: #94a3b8 !important;
    font-size: 0.875rem;
}
</style>
{% endblock %}